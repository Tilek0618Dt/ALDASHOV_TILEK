import random
from app.models import User


EMOJIS_FUN = ["๐", "๐", "๐ฅ", "๐"]
EMOJIS_DARK = ["๐", "โก", "๐", "๐งจ"]
EMOJIS_SMART = ["๐ง", "๐", "๐", "๐งฉ"]
EMOJIS_BOSS = ["๐", "๐", "๐ฐ", "๐"]


def _random_pick(arr):
    return random.choice(arr)


def tilek_wrap(user: User, main_text: str, is_pro: bool = False) -> str:
    """
    TILEK STYLE ENGINE v2.0
    5 ััะฐะฟ personality loop:
    0 -> ๐ FUN
    1 -> ๐ DARK PUSH
    2 -> ๐ง SERIOUS ANALYTIC
    3 -> ๐ฅ MOTIVATION
    4 -> ๐ BOSS LEVEL
    """

    mode = user.style_counter % 5
    user.style_counter += 1

    if mode == 0:
        prefix = f"{_random_pick(EMOJIS_FUN)} ะะพััะผ!"
        vibe = "ะัะณะฐ ะฑะฐั ะถะตัะตั ๐"
        closing = "ะกะตะฝ ะถะฐัะฐะน ะฐะปะฐััาฃ, ะถำฉะฝ ะณะฐะฝะฐ ะฐัะฐะบะตั ะบัะป ๐"

    elif mode == 1:
        prefix = f"{_random_pick(EMOJIS_DARK)} ะขะพะบัะพะฑะพะนััาฃ ะณะพ..."
        vibe = "ะกะธััะตะผะฐ ัะฐััะฐะฑะฐะนั, ัะตะฝ ัะฐััะฐะฑะฐ โก"
        closing = "ะญะณะตั ัะพาฃ ะฝะตััะต ะบะฐะฐะปะฐัะฐาฃ โ ัะพาฃ ะฐัะฐะบะตั ะบัะป."

    elif mode == 2:
        prefix = f"{_random_pick(EMOJIS_SMART)} ะกะตัััะทะฝัะน ัะตะถะธะผ."
        vibe = "ะะทัั ะปะพะณะธะบะฐ ัาฏะนะปำฉะนั."
        closing = "ะกััะฐัะตะณะธั ะถะตาฃะตั. ะญะผะพัะธั ัะผะตั."

    elif mode == 3:
        prefix = f"๐ฅ ะฃััะป ะถะตัะดะต ะบาฏั ะถะฐัะฐั!"
        vibe = "ะัะป ะธะดะตั ะผะฐัััะฐะฑ ะฐะปะฐ ะฐะปะฐั ๐"
        closing = "ะาฏะณาฏะฝ ะฑะฐััะฐ. ะญััะตาฃ ะบะตั ะฑะพะปะพั."

    else:
        prefix = f"{_random_pick(EMOJIS_BOSS)} ะกะตะฝ ะปะธะดะตััะธาฃ."
        vibe = "ะัะป ะดะตาฃะณััะปะดะต ะพะนะปะพะฝะณะพะฝะดะพั ะฐะท."
        closing = "ะะผะฟะตัะธั ะบัััั ัะฑะฐะบััั ะบะตะปะดะธ."

    # PRO ะฑะพะปัะพ ัะตัะตาฃ ััััะบัััะฐ
    if is_pro:
        structure = f"""
{prefix}

๐ ะะตะณะธะทะณะธ ะถะพะพะฟ:
{main_text}

๐ ะะฝะฐะปะธะท:
โข ะัะป ัะตะฐะปะดัั ะธััะตะนั.
โข ะะธัะบ ะฑะฐั, ะฑะธัะพะบ ะบะพะฝััะพะปะดะพ ะฑะพะปะพั.
โข ะะฐัััะฐะฑ ะฟะพัะตะฝัะธะฐะปั ะถะพะณะพัั.

๐ก ะะธะนะธะฝะบะธ ะบะฐะดะฐะผ:
1) ะะธะฝะธ ัะตัั ะบัะป
2) ะะฐััะนะถะฐ ำฉะปัำฉ
3) ะะฐัััะฐะฑะณะฐ ััะณะฐั

{vibe}

{closing}
"""
    else:
        structure = f"""
{prefix}

๐ ะะตะณะธะทะณะธ ะถะพะพะฟ:
{main_text}

๐ก ะะตาฃะตั:
ะะธั ะบะฐะดะฐะผ ะถะฐัะฐ.
ะะฝะดะฐะฝ ะบะธะนะธะฝ ะดะฐะณั ะฑะธั ะบะฐะดะฐะผ.

{vibe}

{closing}
"""

    return structure.strip()


def limit_ad_text() -> str:
    return (
        "๐ซ ะะธะผะธั ะฑาฏััาฏ, ะดะพััะผ ๐ญ\n\n"
        "๐ PLUS โ ะบำฉะฑาฏัำฉำฉะบ ัะฐั + ะฒะธะดะตะพ + ะผัะทัะบะฐ\n"
        "๐ด PRO โ 1500 ัะฐั + ะฟัะธะพัะธัะตั + ัะตัะตาฃ ะฐะฝะฐะปะธะท\n"
        "๐ฅ VIP VIDEO โ ะบะธะฝะพ ัะฐะฟะฐั\n"
        "๐ช VIP MUSIC โ ะฟัะพั ััะตะบ\n\n"
        "๐ ยซ๐ ะัะตะผะธัะผยป ะฑะฐััะฟ ะบาฏัะบำฉ ำฉั ๐๐ฅ"
    )
